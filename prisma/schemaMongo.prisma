generator client {
  provider     = "prisma-client"
  output       = "../src/generated/prismaMongo"
  moduleFormat = "cjs"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL_MONGO")
}

type CultivoParamsParams {
  category_id       Int
  category_name     String
  description       String
  max               Int
  min               Int
  optimal           Int
  unidad_medicion   String
  warning_threshold Int
}

model cultivo_params {
  id     Int                   @id @map("_id")
  params CultivoParamsParams[]
}

model parcela_data {
  id_parcela  Int @id @map("_id")  
  iotReadings IotReading[]         
  @@map("parcela_data")
}

type IotReading {
  id_iot         Int               
  hora           DateTime          
  image_url      String            
  image_result   String?          
  sensorReadings SensorReading[]   
  overall_status String?           
}

type SensorReading {
  id_sensor  Int                  
  lectura    Float                
  status     String?             
  deviation  Float?               
}


model chat_histories {
id         String   @id @default(uuid()) @map("_id")  
userId     Int                                      
parcelaId  Int                                      
messages   Message[]                                
createdAt  DateTime @default(now())                 
updatedAt  DateTime @updatedAt                      
@@unique([userId, parcelaId])                       
}

type Message {
role      String    
content   String   
timestamp DateTime  
}